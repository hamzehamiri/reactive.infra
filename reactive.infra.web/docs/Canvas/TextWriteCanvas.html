<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id="TextCanvas" width="600" height="400"></canvas>
<script type="application/javascript">
    let canvas = document.getElementById('TextCanvas');
    let ctx = canvas.getContext('2d');

    ctx.font = '36px Arial';
    ctx.fillStyle = 'RebeccaPurple';

    function mapToLang(keyCode, lastKeyCode, shift, lang) {
        if (shift) {
            return String.fromCharCode(keyCode + 1375);
        } else {
            return String.fromCharCode(keyCode + 1575);
        }
    }

    let text = "";
    let lastKeyCode = null;
    document.addEventListener('keydown', (event) => {
        if (event.keyCode === 8) {
            text = text.substring(0, text.length - 1);
        } else {
            if (event.keyCode !== 16) {
                text += mapToLang(event.keyCode, lastKeyCode, event.shiftKey, 'fa');
                lastKeyCode = event.keyCode;
            }
        }

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillText(text, 100, 100);
    });
</script>
</body>
</html>